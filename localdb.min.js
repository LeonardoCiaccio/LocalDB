var CryptoJS=CryptoJS||function(a,t){var e={},r=e.lib={},n=function(){},i=r.Base={extend:function(t){n.prototype=this;var e=new n;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=r.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var i=0;i<t;i++)e[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<t;i+=4)e[n+i>>>2]=r[i>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=a.ceil(e/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(4294967296*a.random()|0);return new c.init(e,t)}}),o=e.enc={},s=o.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++){var i=e[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new c.init(r,e/2)}},u=o.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new c.init(r,e)}},f=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},l=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,n=e.sigBytes,i=this.blockSize,o=n/(4*i);if(t=(o=t?a.ceil(o):a.max((0|o)-this._minBufferSize,0))*i,n=a.min(4*t,n),t){for(var s=0;s<t;s+=i)this._doProcessBlock(r,s);s=r.splice(0,t),e.sigBytes-=n}return new c.init(s,n)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=l.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new p.HMAC.init(r,e).finalize(t)}}});var p=e.algo={};return e}(Math);!function(){var t=CryptoJS,c=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var i=0;i<r;i+=3)for(var o=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<r;s++)t.push(n.charAt(o>>>6*(3-s)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,r=this._map;(n=r.charAt(64))&&(-1!=(n=t.indexOf(n))&&(e=n));for(var n=[],i=0,o=0;o<e;o++)if(o%4){var s=r.indexOf(t.charAt(o-1))<<o%4*2,a=r.indexOf(t.charAt(o))>>>6-o%4*2;n[i>>>2]|=(s|a)<<24-i%4*8,i++}return c.create(n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(o){function S(t,e,r,n,i,o,s){return((t=t+(e&r|~e&n)+i+s)<<o|t>>>32-o)+e}function B(t,e,r,n,i,o,s){return((t=t+(e&n|r&~n)+i+s)<<o|t>>>32-o)+e}function E(t,e,r,n,i,o,s){return((t=t+(e^r^n)+i+s)<<o|t>>>32-o)+e}function k(t,e,r,n,i,o,s){return((t=t+(r^(e|~n))+i+s)<<o|t>>>32-o)+e}for(var t=CryptoJS,e=(n=t.lib).WordArray,r=n.Hasher,n=t.algo,C=[],i=0;i<64;i++)C[i]=4294967296*o.abs(o.sin(i+1))|0;n=n.MD5=r.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=t[s=e+r];t[s]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}r=this._hash.words;var i,o,s=t[e+0],a=(n=t[e+1],t[e+2]),c=t[e+3],u=t[e+4],f=t[e+5],l=t[e+6],p=t[e+7],h=t[e+8],d=t[e+9],y=t[e+10],v=t[e+11],g=t[e+12],m=t[e+13],w=t[e+14],b=t[e+15],_=r[0],x=k(x=k(x=k(x=k(x=E(x=E(x=E(x=E(x=B(x=B(x=B(x=B(x=S(x=S(x=S(x=S(x=r[1],o=S(o=r[2],i=S(i=r[3],_=S(_,x,o,i,s,7,C[0]),x,o,n,12,C[1]),_,x,a,17,C[2]),i,_,c,22,C[3]),o=S(o,i=S(i,_=S(_,x,o,i,u,7,C[4]),x,o,f,12,C[5]),_,x,l,17,C[6]),i,_,p,22,C[7]),o=S(o,i=S(i,_=S(_,x,o,i,h,7,C[8]),x,o,d,12,C[9]),_,x,y,17,C[10]),i,_,v,22,C[11]),o=S(o,i=S(i,_=S(_,x,o,i,g,7,C[12]),x,o,m,12,C[13]),_,x,w,17,C[14]),i,_,b,22,C[15]),o=B(o,i=B(i,_=B(_,x,o,i,n,5,C[16]),x,o,l,9,C[17]),_,x,v,14,C[18]),i,_,s,20,C[19]),o=B(o,i=B(i,_=B(_,x,o,i,f,5,C[20]),x,o,y,9,C[21]),_,x,b,14,C[22]),i,_,u,20,C[23]),o=B(o,i=B(i,_=B(_,x,o,i,d,5,C[24]),x,o,w,9,C[25]),_,x,c,14,C[26]),i,_,h,20,C[27]),o=B(o,i=B(i,_=B(_,x,o,i,m,5,C[28]),x,o,a,9,C[29]),_,x,p,14,C[30]),i,_,g,20,C[31]),o=E(o,i=E(i,_=E(_,x,o,i,f,4,C[32]),x,o,h,11,C[33]),_,x,v,16,C[34]),i,_,w,23,C[35]),o=E(o,i=E(i,_=E(_,x,o,i,n,4,C[36]),x,o,u,11,C[37]),_,x,p,16,C[38]),i,_,y,23,C[39]),o=E(o,i=E(i,_=E(_,x,o,i,m,4,C[40]),x,o,s,11,C[41]),_,x,c,16,C[42]),i,_,l,23,C[43]),o=E(o,i=E(i,_=E(_,x,o,i,d,4,C[44]),x,o,g,11,C[45]),_,x,b,16,C[46]),i,_,a,23,C[47]),o=k(o,i=k(i,_=k(_,x,o,i,s,6,C[48]),x,o,p,10,C[49]),_,x,w,15,C[50]),i,_,f,21,C[51]),o=k(o,i=k(i,_=k(_,x,o,i,g,6,C[52]),x,o,c,10,C[53]),_,x,y,15,C[54]),i,_,n,21,C[55]),o=k(o,i=k(i,_=k(_,x,o,i,h,6,C[56]),x,o,b,10,C[57]),_,x,l,15,C[58]),i,_,m,21,C[59]),o=k(o,i=k(i,_=k(_,x,o,i,u,6,C[60]),x,o,v,10,C[61]),_,x,a,15,C[62]),i,_,d,21,C[63]);r[0]=r[0]+_|0,r[1]=r[1]+x|0,r[2]=r[2]+o|0,r[3]=r[3]+i|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32;var i=o.floor(r/4294967296);for(e[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,r=0;r<4;r++)n=e[r],e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),t.MD5=r._createHelper(n),t.HmacMD5=r._createHmacHelper(n)}(Math),function(){var t,e=CryptoJS,r=(t=e.lib).Base,u=t.WordArray,n=(t=e.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=(s=this.cfg).hasher.create(),n=u.create(),i=n.words,o=s.keySize,s=s.iterations;i.length<o;){a&&r.update(a);var a=r.update(t).finalize(e);r.reset();for(var c=1;c<s;c++)a=r.finalize(a),r.reset();n.concat(a)}return n.sigBytes=4*o,n}});e.EvpKDF=function(t,e,r){return n.create(r).compute(t,e)}}(),CryptoJS.lib.Cipher||function(t){var e=(h=CryptoJS).lib,r=e.Base,s=e.WordArray,n=e.BufferedBlockAlgorithm,i=h.enc.Base64,o=h.algo.EvpKDF,a=e.Cipher=n.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(t,e,r){return("string"==typeof e?d:p).encrypt(n,t,e,r)},decrypt:function(t,e,r){return("string"==typeof e?d:p).decrypt(n,t,e,r)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=h.mode={},u=function(t,e,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)t[e+i]^=n[i]},f=(e.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();f.Encryptor=f.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize;u.call(this,t,e,n),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),f.Decryptor=f.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=t.slice(e,e+n);r.decryptBlock(t,e),u.call(this,t,e,n),this._prevBlock=i}}),c=c.CBC=f,f=(h.pad={}).Pkcs7={pad:function(t,e){for(var r,n=(r=(r=4*e)-t.sigBytes%r)<<24|r<<16|r<<8|r,i=[],o=0;o<r;o+=4)i.push(n);r=s.create(i,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:c,padding:f}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var l=e.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),p=(c=(h.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?s.create([1398893684,1701076831]).concat(t).concat(e):e).toString(i)},parse:function(t){var e=(t=i.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var r=s.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return l.create({ciphertext:t,salt:r})}},e.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n);return e=i.finalize(e),i=i.cfg,l.create({ciphertext:e,key:r,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),h=(h.kdf={}).OpenSSL={execute:function(t,e,r,n){return n||(n=s.random(8)),t=o.create({keySize:e+r}).compute(t,n),r=s.create(t.words.slice(e),4*r),t.sigBytes=4*e,l.create({key:t,iv:r,salt:n})}},d=e.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:h}),encrypt:function(t,e,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize),n.iv=r.iv,(t=p.encrypt.call(this,t,e,r.key,n)).mixIn(r),t},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),r=n.kdf.execute(r,t.keySize,t.ivSize,e.salt),n.iv=r.iv,p.decrypt.call(this,t,e,r.key,n)}})}(),function(){for(var t=CryptoJS,e=t.lib.BlockCipher,r=t.algo,s=[],n=[],i=[],o=[],a=[],c=[],u=[],f=[],l=[],p=[],h=[],d=0;d<256;d++)h[d]=d<128?d<<1:d<<1^283;var y=0,v=0;for(d=0;d<256;d++){var g=(g=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&g^99;s[y]=g;var m=h[n[g]=y],w=h[m],b=h[w],_=257*h[g]^16843008*g;i[y]=_<<24|_>>>8,o[y]=_<<16|_>>>16,a[y]=_<<8|_>>>24,c[y]=_,_=16843009*b^65537*w^257*m^16843008*y,u[g]=_<<24|_>>>8,f[g]=_<<16|_>>>16,l[g]=_<<8|_>>>24,p[g]=_,y?(y=m^h[h[h[b^m]]],v^=h[h[v]]):y=v=1}var x=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=e.extend({_doReset:function(){for(var t=(r=this._key).words,e=r.sigBytes/4,r=4*((this._nRounds=e+6)+1),n=this._keySchedule=[],i=0;i<r;i++)if(i<e)n[i]=t[i];else{var o=n[i-1];i%e?6<e&&4==i%e&&(o=s[o>>>24]<<24|s[o>>>16&255]<<16|s[o>>>8&255]<<8|s[255&o]):(o=s[(o=o<<8|o>>>24)>>>24]<<24|s[o>>>16&255]<<16|s[o>>>8&255]<<8|s[255&o],o^=x[i/e|0]<<24),n[i]=n[i-e]^o}for(t=this._invKeySchedule=[],e=0;e<r;e++)i=r-e,o=e%4?n[i]:n[i-4],t[e]=e<4||i<=4?o:u[s[o>>>24]]^f[s[o>>>16&255]]^l[s[o>>>8&255]]^p[s[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,i,o,a,c,s)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,u,f,l,p,n),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,s,a){for(var c=this._nRounds,u=t[e]^r[0],f=t[e+1]^r[1],l=t[e+2]^r[2],p=t[e+3]^r[3],h=4,d=1;d<c;d++){var y=n[u>>>24]^i[f>>>16&255]^o[l>>>8&255]^s[255&p]^r[h++],v=n[f>>>24]^i[l>>>16&255]^o[p>>>8&255]^s[255&u]^r[h++],g=n[l>>>24]^i[p>>>16&255]^o[u>>>8&255]^s[255&f]^r[h++];p=n[p>>>24]^i[u>>>16&255]^o[f>>>8&255]^s[255&l]^r[h++],u=y,f=v,l=g}y=(a[u>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^r[h++],v=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&u])^r[h++],g=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[u>>>8&255]<<8|a[255&f])^r[h++],p=(a[p>>>24]<<24|a[u>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^r[h++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=p},keySize:8});t.AES=e._createHelper(r)}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Promise=t()}}(function(){return function o(s,a,c){function u(r,t){if(!a[r]){if(!s[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(f)return f(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[r]={exports:{}};s[r][0].call(i.exports,function(t){var e=s[r][1][t];return u(e||t)},i,i.exports,o,s,a,c)}return a[r].exports}for(var f="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,f,e){(function(e){"use strict";function r(){c=!0;for(var t,e,r=u.length;r;){for(e=u,u=[],t=-1;++t<r;)e[t]();r=u.length}c=!1}var n,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var i=0,o=new t(r),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var a=new e.MessageChannel;a.port1.onmessage=r,n=function(){a.port2.postMessage(0)}}var c,u=[];f.exports=function(t){1!==u.push(t)||c||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){"use strict";function u(){}function n(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,t!==u&&a(this,t)}function i(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function o(e,r,n){f(function(){var t;try{t=r(n)}catch(t){return l.reject(e,t)}t===e?l.reject(e,new TypeError("Cannot resolve promise with itself")):l.resolve(e,t)})}function s(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function a(e,t){function r(t){i||(i=!0,l.reject(e,t))}function n(t){i||(i=!0,l.resolve(e,t))}var i=!1,o=c(function(){t(n,r)});"error"===o.status&&r(o.value)}function c(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}var f=t(1),l={},p=["REJECTED"],h=["FULFILLED"],d=["PENDING"];(e.exports=n).prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){if("function"!=typeof t&&this.state===h||"function"!=typeof e&&this.state===p)return this;var r=new this.constructor(u);this.state!==d?o(r,this.state===h?t:e,this.outcome):this.queue.push(new i(r,t,e));return r},i.prototype.callFulfilled=function(t){l.resolve(this.promise,t)},i.prototype.otherCallFulfilled=function(t){o(this.promise,this.onFulfilled,t)},i.prototype.callRejected=function(t){l.reject(this.promise,t)},i.prototype.otherCallRejected=function(t){o(this.promise,this.onRejected,t)},l.resolve=function(t,e){var r=c(s,e);if("error"===r.status)return l.reject(t,r.value);var n=r.value;if(n)a(t,n);else{t.state=h,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},l.reject=function(t,e){t.state=p,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},n.resolve=function(t){return t instanceof this?t:l.resolve(new this(u),t)},n.reject=function(t){var e=new this(u);return l.reject(e,t)},n.all=function(t){function e(t,e){r.resolve(t).then(function(t){o[e]=t,++s!==n||i||(i=!0,l.resolve(c,o))},function(t){i||(i=!0,l.reject(c,t))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,a=-1,c=new this(u);++a<n;)e(t[a],a);return c},n.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r,n=t.length,i=!1;if(!n)return this.resolve([]);for(var o=-1,s=new this(u);++o<n;)r=t[o],e.resolve(r).then(function(t){i||(i=!0,l.resolve(s,t))},function(t){i||(i=!0,l.reject(s,t))});return s}},{1:1}]},{},[2])(2)}),function(){"use strict";var e={version:"1.0.1.1",author:"Leonardo Ciaccio",contact:"leonardo.ciaccio@gmail.com",license:"MIT",credits:["code.google.com/p/crypto-js","https://github.com/calvinmetcalf/lie"]},p={encrypt:function(t,e,r){return r||(r=t.password),r?CryptoJS.AES.encrypt(e,r):e},decrypt:function(t,e,r){return r||(r=t.password),r?CryptoJS.AES.decrypt(e,r).toString(CryptoJS.enc.Utf8):e},getNextID:function(t,e){var r=p.getDBtable(t,e);return r?0<r.length?r.sort(function(t,e){return e["#"]-t["#"]})[0]["#"]+1:0:null},isJSON:function(t){try{return JSON.parse(t())}catch(t){return null}},isUnique:function(t,n){return!n.unique||""==n.unique||t.every(function(t,e,r){return!t.unique||t.unique!=n.unique})},setDBtable:function(t,e,r){r=r||[];var n=t.storage,i=t.name+":"+e;try{var o=p.encrypt(t,JSON.stringify(r));return o||(o=JSON.stringify(r)),n[i]=o,!0}catch(t){return!1}},getDBtable:function(e,t){var r=e.storage,n=e.name+":"+t;return void 0===r[n]?[]:this.isJSON(function(){try{var t=p.decrypt(e,r[n]);return t||r[n]}catch(t){return r[n]}})},deepMerge:function(e,r){for(var n in r)try{r[n].constructor==Object?e[n]=deepMerge(e[n],r[n]):e[n]=r[n]}catch(t){e[n]=r[n]}return e}},t=function(t){return"object"!=typeof t&&(t={}),t.storage!=localStorage&&t.storage!=sessionStorage?this.storage=localStorage:this.storage=t.storage,this.name="string"!=typeof t.name||""==t.name?"localdbclass":t.name,this.change="function"!=typeof t.change?function(t,e,r,n){}:t.change,this.password=null,this.dev=e,this};t.prototype.add=function(c,u){if(!c)throw new Error("localdbclass.prototype.add : 'tablename' required !");var f=this;return new Promise(function(t,e){u=Array.isArray(u)?u:[u];var r=p.getDBtable(f,c);if(!r)return e(100);for(var n=[],i=0;i<u.length;i++){var o=u[i];if(p.isUnique(r,o)){var s=p.getNextID(f,c);if(null!==s){var a=p.deepMerge(o,{"#":s});r.push(a),n.push(a)}}}return p.setDBtable(f,c,r)?(f.change(c,n,"add",r),t(n)):e(101)})},t.prototype.update=function(u,f){if(!u)throw new Error("localdbclass.prototype.update : 'tablename' required !");var l=this;return new Promise(function(t,e){f=Array.isArray(f)?f:[f];var r=p.getDBtable(l,u);if(!r)return e(100);for(var n=[],i=0,o=0;o<r.length&&i<f.length;o++)for(var s=0;s<f.length;s++){var a=f[s];if(r[o]["#"]==a["#"]){i++;var c=r.slice();if(c.splice(o,1),!p.isUnique(c,a))continue;r[o]=p.deepMerge(r[o],a),n.push(r[o])}}return p.setDBtable(l,u,r)?(l.change(u,n,"update",r),t(n)):e(101)})},t.prototype.remove=function(s,a){if(!s)throw new Error("localdbclass.prototype.remove : Table name required !");var c=this;return new Promise(function(t,e){a=Array.isArray(a)?a:[a];var r=p.getDBtable(c,s);if(!r)return e(100);for(var n=[],i=0;i<a.length;i++){var o=r.findIndex(function(t){return t["#"]==a[i]});-1<o&&(n.push(r[o]),r.splice(o,1))}return p.setDBtable(c,s,r)?(c.change(s,n,"remove",r),t(n)):e(101)})},t.prototype.move=function(s,a,c){if(!s)throw new Error("localdbclass.prototype.move : Table name required !");if(!(-1<a&&-1<c))throw new Error("localdbclass.prototype.move : ID required !");var u=this;return new Promise(function(t,e){var r=p.getDBtable(u,s);if(!r)return e(100);var n=r.findIndex(function(t){return c==t["#"]});if(n<0)return e(4);var i=r.findIndex(function(t){return a==t["#"]});if(i<0)return e(5);if(i==n)return e(6);var o=r.splice(i,1);return r.splice(n,0,o[0]),p.setDBtable(u,s,r)?(u.change(s,o,"move",r),t(o)):e(101)})},t.prototype.invert=function(a,c,u){if(!a)throw new Error("localdbclass.prototype.invert : Table name required !");if(!(-1<c&&-1<u))throw new Error("localdbclass.prototype.invert : ID required !");var f=this;return new Promise(function(t,e){var r=p.getDBtable(f,a);if(!r)return e(100);var n=r.findIndex(function(t){return u==t["#"]});if(n<0)return e(4);var i,o,s=r.findIndex(function(t){return c==t["#"]});return s<0?e(5):s==n?e(6):(n<s?(i=r.splice(s,1),o=r.splice(n,1),r.splice(n,0,i[0]),r.splice(s,0,o[0])):(o=r.splice(n,1),i=r.splice(s,1),r.splice(s,0,o[0]),r.splice(n,0,i[0])),p.setDBtable(f,a,r)?(f.change(a,[i,o],"invert",r),t([i,o])):e(101))})},t.prototype.query=function(s,a,c){if(!s)throw new Error("localdbclass.prototype.query : Table name required !");var u=this;return new Promise(function(t,e){"function"!=typeof a&&(a=function(){return!0}),c||(c={}),c.offset=c.offset&&0<parseInt(c.offset)?parseInt(c.offset):0,c.limit=c.limit&&0<parseInt(c.limit)?parseInt(c.limit):-1,"disc"!==c.sort&&(c.sort="asc");var r=[],n=p.getDBtable(u,s);if(!n)return e(100);n.slice();c.sortby&&"string"==typeof c.sortby&&("asc"==c.sort?n.sort(function(t,e){return"string"==typeof t[c.sortby]&&"string"==typeof e[c.sortby]?t[c.sortby].localeCompare(e[c.sortby]):parseInt(t[c.sortby])-parseInt(e[c.sortby])}):n.sort(function(t,e){return"string"==typeof t[c.sortby]&&"string"==typeof e[c.sortby]?e[c.sortby].localeCompare(t[c.sortby]):parseInt(e[c.sortby])-parseInt(t[c.sortby])}));for(var i=c.offset;i<n.length&&(c.limit<0||i<c.limit);i++){var o=n[i];!0===a(o)&&r.push(o)}return t(r)})},t.prototype.encryptdb=function(s){var a=this;return new Promise(function(t,e){var r=a.storage,n={};for(var i in r)if(i.match(new RegExp("^"+a.name,"g")))try{var o=p.encrypt(a,r[i],s);if(!o)return e();n[i]=o}catch(t){return e()}for(var i in n)r[i]=n[i];return t()})},t.prototype.decryptdb=function(s){var a=this;return new Promise(function(t,e){var r=a.storage,n={};for(var i in r)if(i.match(new RegExp("^"+a.name,"g"))){try{if(JSON.parse(r[i])){n[i]=r[i];continue}}catch(t){}try{var o=p.decrypt(a,r[i],s);if(o){if(JSON.parse(o)){n[i]=o;continue}return e()}return e()}catch(t){return e()}}for(var i in n)r[i]=n[i];return t()})},t.prototype.getTable=function(t){if(!t)throw new Error("localdbclass.prototype.getTable : Table name required !");return p.getDBtable(this,t)},t.prototype.countRecords=function(n){if(!n)throw new Error("localdbclass.prototype.countRecords : Table name required !");var i=this;return new Promise(function(t,e){var r=p.getDBtable(i,n);return r?t(r.length):e(100)})},t.prototype.isEmpty=function(){var t=this.storage,e=[];for(var r in t)if(r.match(new RegExp("^"+this.name,"g"))){var n={};n[r]=t[r],e.push(n)}return e.length<1},t.prototype.export=function(){var s=this;return new Promise(function(t,e){var r=s.storage,n=[];for(var i in r)if(i.match(new RegExp("^"+s.name,"g"))){var o={};o[i]=r[i],n.push(o)}n.length<1&&t(null),t(JSON.stringify(n))})},t.prototype.import=function(i){var o=this;return new Promise(function(t,e){var r=o.storage;if("string"!=typeof i)throw new Error("localdbclass.prototype.import : require text format alldb");try{var n;JSON.parse(i).forEach(function(t){try{r[Object.keys(t)]=t[Object.keys(t)]}catch(t){}try{if(!n){var e=Object.keys(t).toString();n=e.split(":")[0]}}catch(t){}}),n&&(o.name=n)}catch(t){e("localdbclass.prototype.import : problems on import")}t(o.name)})},t.prototype.clear=function(i){var o=this;return new Promise(function(t,e){var r=o.storage;for(var n in r)(i&&n.match(new RegExp("^"+o.name+":"+i.toString()+"$","g"))||!i&&n.match(new RegExp("^"+o.name,"g")))&&r.removeItem(n);o.change(i,[],"clear",[]),t(o.name)})},t.prototype.isEncrypted=function(){var s=this;return new Promise(function(t,e){var r=s.storage,n=0,i=0;for(var o in r)o.match(new RegExp("^"+s.name,"g"))&&(n++,null===p.isJSON(function(){try{var t=decrypt(r[o]);return t||r[o]}catch(t){return r[o]}})&&i++);t([n,i])})},window.localdb=t}();
