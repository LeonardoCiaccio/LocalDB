var CryptoJS=CryptoJS||function(e,t){var r={},n=r.lib={},i=function(){},o=n.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=o.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var i=0;e>i;i++)t[n+i>>>2]|=(r[i>>>2]>>>24-8*(i%4)&255)<<24-8*((n+i)%4);else if(65535<r.length)for(i=0;e>i;i+=4)t[n+i>>>2]=r[i>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-8*(r%4),t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;t>n;n+=4)r.push(4294967296*e.random()|0);return new s.init(r,t)}}),a=r.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;e>n;n++){var i=t[n>>>2]>>>24-8*(n%4)&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new s.init(r,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;e>n;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-8*(n%4)&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new s.init(r,t)}},f=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=i/(4*o),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var c=0;t>c;c+=o)this._doProcessBlock(n,c);c=n.splice(0,t),r.sigBytes-=i}return new s.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}});var p=r.algo={};return r}(Math);!function(){var e=CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;r>i;i+=3)for(var o=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,s=0;4>s&&r>i+.75*s;s++)e.push(n.charAt(o>>>6*(3-s)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var r=e.length,n=this._map,i=n.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(r=i));for(var i=[],o=0,s=0;r>s;s++)if(s%4){var a=n.indexOf(e.charAt(s-1))<<2*(s%4),c=n.indexOf(e.charAt(s))>>>6-2*(s%4);i[o>>>2]|=(a|c)<<24-8*(o%4),o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,r,n,i,o,s){return e=e+(t&r|~t&n)+i+s,(e<<o|e>>>32-o)+t}function r(e,t,r,n,i,o,s){return e=e+(t&n|r&~n)+i+s,(e<<o|e>>>32-o)+t}function n(e,t,r,n,i,o,s){return e=e+(t^r^n)+i+s,(e<<o|e>>>32-o)+t}function i(e,t,r,n,i,o,s){return e=e+(r^(t|~n))+i+s,(e<<o|e>>>32-o)+t}for(var o=CryptoJS,s=o.lib,a=s.WordArray,c=s.Hasher,s=o.algo,u=[],f=0;64>f;f++)u[f]=4294967296*e.abs(e.sin(f+1))|0;s=s.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,o){for(var s=0;16>s;s++){var a=o+s,c=e[a];e[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var s=this._hash.words,a=e[o+0],c=e[o+1],f=e[o+2],l=e[o+3],p=e[o+4],h=e[o+5],d=e[o+6],y=e[o+7],v=e[o+8],g=e[o+9],m=e[o+10],w=e[o+11],b=e[o+12],_=e[o+13],x=e[o+14],S=e[o+15],B=s[0],E=s[1],k=s[2],C=s[3],B=t(B,E,k,C,a,7,u[0]),C=t(C,B,E,k,c,12,u[1]),k=t(k,C,B,E,f,17,u[2]),E=t(E,k,C,B,l,22,u[3]),B=t(B,E,k,C,p,7,u[4]),C=t(C,B,E,k,h,12,u[5]),k=t(k,C,B,E,d,17,u[6]),E=t(E,k,C,B,y,22,u[7]),B=t(B,E,k,C,v,7,u[8]),C=t(C,B,E,k,g,12,u[9]),k=t(k,C,B,E,m,17,u[10]),E=t(E,k,C,B,w,22,u[11]),B=t(B,E,k,C,b,7,u[12]),C=t(C,B,E,k,_,12,u[13]),k=t(k,C,B,E,x,17,u[14]),E=t(E,k,C,B,S,22,u[15]),B=r(B,E,k,C,c,5,u[16]),C=r(C,B,E,k,d,9,u[17]),k=r(k,C,B,E,w,14,u[18]),E=r(E,k,C,B,a,20,u[19]),B=r(B,E,k,C,h,5,u[20]),C=r(C,B,E,k,m,9,u[21]),k=r(k,C,B,E,S,14,u[22]),E=r(E,k,C,B,p,20,u[23]),B=r(B,E,k,C,g,5,u[24]),C=r(C,B,E,k,x,9,u[25]),k=r(k,C,B,E,l,14,u[26]),E=r(E,k,C,B,v,20,u[27]),B=r(B,E,k,C,_,5,u[28]),C=r(C,B,E,k,f,9,u[29]),k=r(k,C,B,E,y,14,u[30]),E=r(E,k,C,B,b,20,u[31]),B=n(B,E,k,C,h,4,u[32]),C=n(C,B,E,k,v,11,u[33]),k=n(k,C,B,E,w,16,u[34]),E=n(E,k,C,B,x,23,u[35]),B=n(B,E,k,C,c,4,u[36]),C=n(C,B,E,k,p,11,u[37]),k=n(k,C,B,E,y,16,u[38]),E=n(E,k,C,B,m,23,u[39]),B=n(B,E,k,C,_,4,u[40]),C=n(C,B,E,k,a,11,u[41]),k=n(k,C,B,E,l,16,u[42]),E=n(E,k,C,B,d,23,u[43]),B=n(B,E,k,C,g,4,u[44]),C=n(C,B,E,k,b,11,u[45]),k=n(k,C,B,E,S,16,u[46]),E=n(E,k,C,B,f,23,u[47]),B=i(B,E,k,C,a,6,u[48]),C=i(C,B,E,k,y,10,u[49]),k=i(k,C,B,E,x,15,u[50]),E=i(E,k,C,B,h,21,u[51]),B=i(B,E,k,C,b,6,u[52]),C=i(C,B,E,k,l,10,u[53]),k=i(k,C,B,E,m,15,u[54]),E=i(E,k,C,B,c,21,u[55]),B=i(B,E,k,C,v,6,u[56]),C=i(C,B,E,k,S,10,u[57]),k=i(k,C,B,E,d,15,u[58]),E=i(E,k,C,B,_,21,u[59]),B=i(B,E,k,C,p,6,u[60]),C=i(C,B,E,k,w,10,u[61]),k=i(k,C,B,E,f,15,u[62]),E=i(E,k,C,B,g,21,u[63]);s[0]=s[0]+B|0,s[1]=s[1]+E|0,s[2]=s[2]+k|0,s[3]=s[3]+C|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296);for(r[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[(i+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process(),t=this._hash,r=t.words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=c._createHelper(s),o.HmacMD5=c._createHmacHelper(s)}(Math),function(){var e=CryptoJS,t=e.lib,r=t.Base,n=t.WordArray,t=e.algo,i=t.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=r.hasher.create(),o=n.create(),s=o.words,a=r.keySize,r=r.iterations;s.length<a;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var u=1;r>u;u++)c=i.finalize(c),i.reset();o.concat(c)}return o.sigBytes=4*a,o}});e.EvpKDF=function(e,t,r){return i.create(r).compute(e,t)}}(),CryptoJS.lib.Cipher||function(e){var t=CryptoJS,r=t.lib,n=r.Base,i=r.WordArray,o=r.BufferedBlockAlgorithm,s=t.enc.Base64,a=t.algo.EvpKDF,c=r.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?d:h).encrypt(e,t,r,n)},decrypt:function(t,r,n){return("string"==typeof r?d:h).decrypt(e,t,r,n)}}}});r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=t.mode={},f=function(t,r,n){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;n>o;o++)t[r+o]^=i[o]},l=(r.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;f.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),l.Decryptor=l.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),f.call(this,e,t,n),this._prevBlock=i}}),u=u.CBC=l,l=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,r=r-e.sigBytes%r,n=r<<24|r<<16|r<<8|r,o=[],s=0;r>s;s+=4)o.push(n);r=i.create(o,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:l}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=r.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),u=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){e=s.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var r=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:r})}},h=r.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n);return t=i.finalize(t),i=i.cfg,p.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,r,n){return n||(n=i.random(8)),e=a.create({keySize:t+r}).compute(e,n),r=i.create(e.words.slice(t),4*r),e.sigBytes=4*t,p.create({key:e,iv:r,salt:n})}},d=r.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:t}),encrypt:function(e,t,r,n){return n=this.cfg.extend(n),r=n.kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,e=h.encrypt.call(this,e,t,r.key,n),e.mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,h.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=CryptoJS,t=e.lib.BlockCipher,r=e.algo,n=[],i=[],o=[],s=[],a=[],c=[],u=[],f=[],l=[],p=[],h=[],d=0;256>d;d++)h[d]=128>d?d<<1:d<<1^283;for(var y=0,v=0,d=0;256>d;d++){var g=v^v<<1^v<<2^v<<3^v<<4,g=g>>>8^255&g^99;n[y]=g,i[g]=y;var m=h[y],w=h[m],b=h[w],_=257*h[g]^16843008*g;o[y]=_<<24|_>>>8,s[y]=_<<16|_>>>16,a[y]=_<<8|_>>>24,c[y]=_,_=16843009*b^65537*w^257*m^16843008*y,u[g]=_<<24|_>>>8,f[g]=_<<16|_>>>16,l[g]=_<<8|_>>>24,p[g]=_,y?(y=m^h[h[h[b^m]]],v^=h[h[v]]):y=v=1}var x=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes/4,e=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],o=0;e>o;o++)if(r>o)i[o]=t[o];else{var s=i[o-1];o%r?r>6&&4==o%r&&(s=n[s>>>24]<<24|n[s>>>16&255]<<16|n[s>>>8&255]<<8|n[255&s]):(s=s<<8|s>>>24,s=n[s>>>24]<<24|n[s>>>16&255]<<16|n[s>>>8&255]<<8|n[255&s],s^=x[o/r|0]<<24),i[o]=i[o-r]^s}for(t=this._invKeySchedule=[],r=0;e>r;r++)o=e-r,s=r%4?i[o]:i[o-4],t[r]=4>r||4>=o?s:u[n[s>>>24]]^f[n[s>>>16&255]]^l[n[s>>>8&255]]^p[n[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,a,c,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,f,l,p,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,s,a){for(var c=this._nRounds,u=e[t]^r[0],f=e[t+1]^r[1],l=e[t+2]^r[2],p=e[t+3]^r[3],h=4,d=1;c>d;d++)var y=n[u>>>24]^i[f>>>16&255]^o[l>>>8&255]^s[255&p]^r[h++],v=n[f>>>24]^i[l>>>16&255]^o[p>>>8&255]^s[255&u]^r[h++],g=n[l>>>24]^i[p>>>16&255]^o[u>>>8&255]^s[255&f]^r[h++],p=n[p>>>24]^i[u>>>16&255]^o[f>>>8&255]^s[255&l]^r[h++],u=y,f=v,l=g;y=(a[u>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^r[h++],v=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&u])^r[h++],g=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[u>>>8&255]<<8|a[255&f])^r[h++],p=(a[p>>>24]<<24|a[u>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^r[h++],e[t]=y,e[t+1]=v,e[t+2]=g,e[t+3]=p},keySize:8});e.AES=t._createHelper(r)}(),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Promise=e()}}(function(){return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t){(function(e){"use strict";function r(){f=!0;for(var e,t,r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}f=!1}function n(e){1!==l.push(e)||f||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var s=0,a=new o(r),c=e.document.createTextNode("");a.observe(c,{characterData:!0}),i=function(){c.data=s=++s%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var u=new e.MessageChannel;u.port1.onmessage=r,i=function(){u.port2.postMessage(0)}}var f,l=[];t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t){"use strict";function r(){}function n(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,e!==r&&a(this,e)}function i(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function o(e,t,r){h(function(){var t;try{t=n(r)}catch(n){return d.reject(e,n)}t===e?d.reject(e,new TypeError("Cannot resolve promise with itself")):d.resolve(e,t)})}function s(e){var t=e&&e.then;return!e||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof t?void 0:function(){t.apply(e,arguments)}}function a(e,t){function r(t){o||(o=!0,d.reject(e,t))}function n(t){o||(o=!0,d.resolve(e,t))}function i(){t(n,r)}var o=!1,s=c(i);"error"===s.status&&r(s.value)}function c(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function u(e){return e instanceof this?e:d.resolve(new this(r),e)}function f(e){var t=new this(r);return d.reject(t,e)}function l(e){function t(e,t){function r(e){s[t]=e,++a!==i||o||(o=!0,d.resolve(u,s))}n.resolve(e).then(r,function(e){o||(o=!0,d.reject(u,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,c=-1,u=new this(r);++c<i;)t(e[c],c);return u}function p(e){function t(e){n.resolve(e).then(function(e){o||(o=!0,d.resolve(a,e))},function(e){o||(o=!0,d.reject(a,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var s=-1,a=new this(r);++s<i;)t(e[s]);return a}var h=e(1),d={},y=["REJECTED"],v=["FULFILLED"],g=["PENDING"];t.exports=n,n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){if("function"!=typeof e&&this.state===v||"function"!=typeof t&&this.state===y)return this;var n=new this.constructor(r);if(this.state!==g){var s=this.state===v?e:t;o(n,s,this.outcome)}else this.queue.push(new i(n,e,t));return n},i.prototype.callFulfilled=function(e){d.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){o(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){d.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){o(this.promise,this.onRejected,e)},d.resolve=function(e,t){var r=c(s,t);if("error"===r.status)return d.reject(e,r.value);var n=r.value;if(n)a(e,n);else{e.state=v,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},d.reject=function(e,t){e.state=y,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},n.resolve=u,n.reject=f,n.all=l,n.race=p},{1:1}]},{},[2])(2)}),function(){"use strict";var e=":",t={version:"1.0.0.9",author:"Leonardo Ciaccio",contact:"leonardo.ciaccio@gmail.com",license:"MIT",credits:["code.google.com/p/crypto-js","https://github.com/calvinmetcalf/lie"]},r={encrypt:function(e,t,r){return r||(r=e.password),r?CryptoJS.AES.encrypt(t,r):t},decrypt:function(e,t,r){return r||(r=e.password),r?CryptoJS.AES.decrypt(t,r).toString(CryptoJS.enc.Utf8):t},getNextID:function(e,t){var n=r.getDBtable(e,t);return n?n.length>0?n.sort(function(e,t){return t["#"]-e["#"]})[0]["#"]+1:0:null},isJSON:function(e){try{return JSON.parse(e())}catch(t){return null}},isUnique:function(e,t){return!t.unique||""==t.unique||e.every(function(e){return!e.unique||e.unique!=t.unique})},setDBtable:function(t,n,i){i=i||[];var o=t.storage,s=t.name,a=s+e+n;try{var c=r.encrypt(t,JSON.stringify(i));return c||(c=JSON.stringify(i)),o[a]=c,!0}catch(u){return!1}},getDBtable:function(t,n){var i=t.storage,o=t.name,s=o+e+n;return"undefined"==typeof i[s]?[]:this.isJSON(function(){try{var e=r.decrypt(t,i[s]);return e?e:i[s]}catch(n){return i[s]}})},deepMerge:function(e,t){for(var r in t)try{e[r]=t[r].constructor==Object?deepMerge(e[r],t[r]):t[r]}catch(n){e[r]=t[r]}return e}},n=function(e){return"object"!=typeof e&&(e={}),this.storage=e.storage!=localStorage&&e.storage!=sessionStorage?localStorage:e.storage,this.name="string"!=typeof e.name||""==e.name?"localdbclass":e.name,this.change="function"!=typeof e.change?function(){}:e.change,this.password=null,this.dev=t,this};n.prototype.add=function(e,t){if(!e)throw new Error("localdbclass.prototype.add : 'tablename' required !");var n=this;return new Promise(function(i,o){t=Array.isArray(t)?t:[t];var s=r.getDBtable(n,e);if(!s)return o(100);for(var a=[],c=0;c<t.length;c++){var u=t[c];if(r.isUnique(s,u)){var f=r.getNextID(n,e);if(null!==f){var l=r.deepMerge(u,{"#":f});s.push(l),a.push(l)}}}var p=r.setDBtable(n,e,s);return p?(n.change(e,a,"add",s),i(a)):o(101)})},n.prototype.update=function(e,t){if(!e)throw new Error("localdbclass.prototype.update : 'tablename' required !");var n=this;return new Promise(function(i,o){t=Array.isArray(t)?t:[t];var s=r.getDBtable(n,e);if(!s)return o(100);for(var a=[],c=0,u=0;u<s.length&&c<t.length;u++)for(var f=0;f<t.length;f++){var l=t[f];if(s[u]["#"]==l["#"]){c++;var p=s.slice();if(p.splice(u,1),!r.isUnique(p,l))continue;s[u]=r.deepMerge(s[u],l),a.push(s[u])}}var h=r.setDBtable(n,e,s);return h?(n.change(e,a,"update",s),i(a)):o(101)})},n.prototype.remove=function(e,t){if(!e)throw new Error("localdbclass.prototype.remove : Table name required !");var n=this;return new Promise(function(i,o){t=Array.isArray(t)?t:[t];var s=r.getDBtable(n,e);if(!s)return o(100);for(var a=[],c=0;c<t.length;c++){var u=s.findIndex(function(e){return e["#"]==t[c]});u>-1&&(a.push(s[u]),s.splice(u,1))}var f=r.setDBtable(n,e,s);return f?(n.change(e,a,"remove",s),i(a)):o(101)})},n.prototype.move=function(e,t,n){if(!e)throw new Error("localdbclass.prototype.move : Table name required !");if(!(t>-1&&n>-1))throw new Error("localdbclass.prototype.move : ID required !");var i=this;return new Promise(function(o,s){var a=r.getDBtable(i,e);if(!a)return s(100);var c=a.findIndex(function(e){return n==e["#"]});if(0>c)return s(4);var u=a.findIndex(function(e){return t==e["#"]});if(0>u)return s(5);if(u==c)return s(6);var f=a.splice(u,1);a.splice(c,0,f[0]);var l=r.setDBtable(i,e,a);return l?(i.change(e,f,"move",a),o(f)):s(101)})},n.prototype.invert=function(e,t,n){if(!e)throw new Error("localdbclass.prototype.invert : Table name required !");if(!(t>-1&&n>-1))throw new Error("localdbclass.prototype.invert : ID required !");var i=this;return new Promise(function(o,s){var a=r.getDBtable(i,e);if(!a)return s(100);var c=a.findIndex(function(e){return n==e["#"]});if(0>c)return s(4);var u=a.findIndex(function(e){return t==e["#"]});if(0>u)return s(5);if(u==c)return s(6);var f,l;u>c?(f=a.splice(u,1),l=a.splice(c,1),a.splice(c,0,f[0]),a.splice(u,0,l[0])):(l=a.splice(c,1),f=a.splice(u,1),a.splice(u,0,l[0]),a.splice(c,0,f[0]));var p=r.setDBtable(i,e,a);return p?(i.change(e,[f,l],"invert",a),o([f,l])):s(101)})},n.prototype.query=function(e,t,n){if(!e)throw new Error("localdbclass.prototype.query : Table name required !");var i=this;return new Promise(function(o,s){"function"!=typeof t&&(t=function(){return!0}),n||(n={}),n.offset=n.offset&&parseInt(n.offset)>0?parseInt(n.offset):0,n.limit=n.limit&&parseInt(n.limit)>0?parseInt(n.limit):-1,"disc"!==n.sort&&(n.sort="asc");var a=[],c=r.getDBtable(i,e);if(!c)return s(100);c.slice();n.sortby&&"string"==typeof n.sortby&&c.sort("asc"==n.sort?function(e,t){return"string"==typeof e[n.sortby]&&"string"==typeof t[n.sortby]?e[n.sortby].localeCompare(t[n.sortby]):parseInt(e[n.sortby])-parseInt(t[n.sortby])}:function(e,t){return"string"==typeof e[n.sortby]&&"string"==typeof t[n.sortby]?t[n.sortby].localeCompare(e[n.sortby]):parseInt(t[n.sortby])-parseInt(e[n.sortby])});for(var u=n.offset;u<c.length&&(n.limit<0||u<n.limit);u++){var f=c[u];t(f)===!0&&a.push(f)}return o(a)})},n.prototype.encryptdb=function(e){var t=this;return new Promise(function(n,i){var o=t.storage,s={};for(var a in o)if(a.match(new RegExp("^"+t.name,"g")))try{var c=r.encrypt(t,o[a],e);if(!c)return i();s[a]=c}catch(u){return i()}for(var a in s)o[a]=s[a];return n()})},n.prototype.decryptdb=function(e){var t=this;return new Promise(function(n,i){var o=t.storage,s={};for(var a in o)if(a.match(new RegExp("^"+t.name,"g"))){try{if(JSON.parse(o[a])){s[a]=o[a];continue}}catch(c){}try{var u=r.decrypt(t,o[a],e);if(u){if(JSON.parse(u)){s[a]=u;continue}return i()}return i()}catch(c){return i()}}for(var a in s)o[a]=s[a];return n()})},n.prototype.getTable=function(e){if(!e)throw new Error("localdbclass.prototype.getTable : Table name required !");var t=this;return r.getDBtable(t,e)},n.prototype.countRecords=function(e){if(!e)throw new Error("localdbclass.prototype.countRecords : Table name required !");var t=this;return new Promise(function(n,i){var o=r.getDBtable(t,e);return o?n(o.length):i(100)})},n.prototype.export=function(){var e=this;return new Promise(function(t){var r=e.storage,n=[];for(var i in r)if(i.match(new RegExp("^"+e.name,"g"))){var o={};o[i]=r[i],n.push(o)}n.length<1&&t(null),t(JSON.stringify(n))})},n.prototype.import=function(e){var t=this;return new Promise(function(r,n){var i=t.storage;if("string"!=typeof e)throw new Error("localdbclass.prototype.import : require text format alldb");try{var o=JSON.parse(e);o.forEach(function(e){try{i[Object.keys(e)]=e[Object.keys(e)]}catch(t){}})}catch(s){n("localdbclass.prototype.import : problems on import")}r()})},n.prototype.clear=function(t){var r=this;return new Promise(function(n){var i=r.storage;for(var o in i)(t&&o.match(new RegExp("^"+r.name+e+t.toString()+"$","g"))||!t&&o.match(new RegExp("^"+r.name,"g")))&&i.removeItem(o);n(r.name)})},n.prototype.isEncrypted=function(){var e=this;return new Promise(function(t){var n=e.storage,i=0,o=0;for(var s in n)s.match(new RegExp("^"+e.name,"g"))&&(i++,null===r.isJSON(function(){try{var e=decrypt(n[s]);return e?e:n[s]}catch(t){return n[s]}})&&o++);t([i,o])})},window.localdb=n}();
//# sourceMappingURL=localdb.min.js.map